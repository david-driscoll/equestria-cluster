# yaml-language-server: $schema=https://raw.githubusercontent.com/not-first/glance-schema/master/schema.json#/properties/pages
- name: Home
  width: wide
  desktop-navigation-width: default

  columns:
    - size: small
      widgets:
        - type: calendar

        # - type: rss
        #   limit: 10
        #   collapse-after: 3
        #   cache: 3h
        #   feeds:
        #     - url: https://ciechanow.ski/atom.xml
        #     - url: https://www.joshwcomeau.com/rss.xml
        #       title: Josh Comeau
        #     - url: https://samwho.dev/rss.xml
        #     - url: https://awesomekling.github.io/feed.xml
        #     - url: https://ishadeed.com/feed.xml
        #       title: Ahmad Shadeed

        - type: twitch-channels
          channels:
            - linustech

    - size: full
      widgets:
        - type: hacker-news

        - type: videos
          channels:
            - UCR-DXc1voovS8nhAvccRZhg # Jeff Geerling
            - UCv6J_jJa8GJqFwQNgNrMuww # ServeTheHome
            - UCOk-gHyjcWZNj3Br4oxwh0A # Techno Tim

        - type: reddit
          subreddit: selfhosted

    - size: small
      widgets:
        - type: weather
          location: Cary, North Carolina, United States
          show-area-name: true
          units: imperial

        # Uptime Monitor
        - type: custom-api
          title: Service Status
          url: https://uptime.${ROOT_DOMAIN}/api/v1/endpoints/statuses
          cache: 2m
          template: |
            <style>
              .status-item { display: flex; justify-content: space-between; margin-bottom: 5px; padding: 5px 0; }
              .status-up { color: var(--color-positive); }
              .status-down { color: var(--color-negative); }
            </style>
            {{ range .JSON.Array "" }}
              {{ $results := .Array "results" }}
              {{ if gt (len $results) 0 }}
                {{ $latestIndex := sub (len $results) 1 }}
                {{ $latest := index $results $latestIndex }}
                {{ if not ($latest.Bool "success") }}
                  <div class="status-item">
                    <span>{{ .String "name" }}</span>
                    <span class="status-down">âœ— Down</span>
                  </div>
                {{ end }}
              {{ end }}
            {{ end }}
