# yaml-language-server: $schema=https://raw.githubusercontent.com/not-first/glance-schema/master/schema.json#/definitions/widget
- type: custom-api
  title: Service Status
  url: ${UPTIME_URL}/api/v1/endpoints/statuses
  cache: 2m
  template: |
    <style>
      .status-item { display: flex; justify-content: space-between; margin-bottom: 5px; padding: 5px 0; }
      .status-up { color: var(--color-positive); }
      .status-down { color: var(--color-negative); }
    </style>
    {{ range .JSON.Array "" }}
      {{ $results := .Array "results" }}
      {{ if gt (len $results) 0 }}
        {{ $latestIndex := sub (len $results) 1 }}
        {{ $latest := index $results $latestIndex }}
        {{ if not ($latest.Bool "success") }}
          <div class="status-item">
            <span>{{ .String "name" }}</span>
            <span class="status-down">âœ— Down</span>
          </div>
        {{ end }}
      {{ end }}
    {{ end }}
