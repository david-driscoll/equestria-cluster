# yaml-language-server: $schema=https://kubernetes-schemas.pages.dev/external-secrets.io/externalsecret_v1beta1.json
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
    name: littlestech-github-app
spec:
    secretStoreRef:
        kind: ClusterSecretStore
        name: onepassword-connect
    target:
        template:
            data:
                github_app_id: "{{ .appid }}"
                github_app_installation_id: "{{ .installationid }}"
                github_app_private_key: "{{ .privatekey }}"
                githubConfigUrl: "{{ .url }}"
                controllerServiceAccountNamespace: github-actions
                controllerServiceAccountName: gha-arc-controller
    dataFrom:
        - extract:
            key: Littlestech Github App
    data:
        - secretKey: privatekey
          remoteRef:
            key: Littlestech Github App
            property: private key
